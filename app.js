(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{171:function(e,t,n){var r=n(54),o=n(26);function i(e,t,n,r,i,a,c){try{var s=e[a](c),u=s.value}catch(e){return void n(e)}s.done?t(u):o.resolve(u).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new o(function(r,o){var a=e.apply(t,n);function c(e){i(a,r,o,c,s,"next",e)}function s(e){i(a,r,o,c,s,"throw",e)}c(void 0)})}}var c=n(99),s=n(215),u=n(175),l=n(36),f=n(190),p=n(238),h=n(55).__,d=n(239),m=n(86),b=n(240),v=n(248).isOverflowing,y=n(249),g=n(250),w=n(256),k=n(257),T=new u(n(260)),E=new u(n(261));n(262);var S=m.tabs=new f({nav:c.header,view:c.main});S.add("#welcome",h("Welcome"),E),S.add("#login",h("Login"),c.loginForm),S.add("#license",null,T),S.add("#about",null,E),S.select(location.hash),S.selected||S.select("#welcome"),S.fitScreen=function(){v(c.header)&&l.replace(S.nav.domNode,S.selector.domNode)},S.fitScreen();var _,O=new s(c.loginForm).addValidator(C);function A(){return(A=a(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4),n.e(1)]).then(n.t.bind(null,272,7)).then(function(e){return e.default});case 2:return _=e.sent,O.setInfo(h("Please open the Stellar App in your Ledger Wallet")),e.prev=4,e.next=7,_.connect();case 7:c.loginAddressBox.value=_.publicKey,C(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0),O.setError(e.t0);case 15:case"end":return e.stop()}},e,null,[[4,11]])}))).apply(this,arguments)}function C(){return R.apply(this,arguments)}function R(){return(R=a(r.mark(function e(){var t,n=arguments;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:c.loginAddressBox.value){e.next=3;break}throw new Error(h("Please enter an address."));case 3:return _&&_.disconnect(),O.setInfo(h("Connecting to your account...")),p.$set({address:t}),d.enable(),e.prev=7,e.next=10,b.resolve(t);case 10:m.portfolio=e.sent,O.setInfo("".concat(h("Fetching market data"),"...")),setTimeout(function(){return O.setInfo("".concat(h('Sorry, it takes a while (^.^)"'),"..."))},1e4),setTimeout(function(){return O.setInfo("".concat(h("Almost there"),"..."))},2e4),setTimeout(function(){return O.setInfo("".concat(h("I'm running, I'm running"),"..."))},3e4),m.portfolio.listen("open",function(){I(),d.disable()}),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(7),console.error(e.t0),O.setError(e.t0),d.disable();case 23:case"end":return e.stop()}},e,null,[[7,18]])}))).apply(this,arguments)}function I(){var e=m.portfolio,t=location.hash;S.remove("#welcome"),S.remove("#login"),S.add("#portfolio",h("Portfolio"),new g(e)),S.add("#rebalance",h("Rebalance"),new k(e)),S.add("#activity",h("Activity"),new y(e)),S.add("#settings",h("Settings"),new w),S.add("#logout",h("Logout"),function(){location.replace(location.href.replace(/\?.*$/,"#login"))}),S.fitScreen(),S.select(t),S.selected||S.select("#portfolio")}l.show(c.loginForm),c.loginForm.autocomplete="on",p.address?(S.select("#login"),c.loginAddressBox.value=p.address,C()):c.ledgerLoginButton.onclick=function(){return function(){return A.apply(this,arguments)}()},S.listen("select",function(e){location.hash=e,window.scrollTo(0,0)})},188:function(e,t,n){var r=n(11),o=n(9),i=n(26),a=n(33),c=n(5),s=n(25),u=n(34),l=n(54),f=n(18);function p(e){return(p="function"==typeof o&&"symbol"==typeof r?function(e){return typeof e}:function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":typeof e})(e)}function h(e,t,n,r,o,a,c){try{var s=e[a](c),u=s.value}catch(e){return void n(e)}s.done?t(u):i.resolve(u).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new i(function(r,o){var i=e.apply(t,n);function a(e){h(i,r,o,a,c,"next",e)}function c(e){h(i,r,o,a,c,"throw",e)}a(void 0)})}}function m(e){return(m=u?a:function(e){return e.__proto__||a(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),c(e,r.key,r)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}function g(e,t){return(g=u||function(e,t){return e.__proto__=t,e})(e,t)}var w="https://www.xe.com/themes/xe/images/flags/svg/",k=".svg",T=n(177),E=n(87),S=n(86),_=n(206),O=n(207),A=e.exports=function(e){"use strict";function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=m(t).call(this),(n=!o||"object"!==p(o)&&"function"!=typeof o?b(r):o).id=e,t.table[e]=b(n),n.image="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",t.info[e]?(n.code=e,f(b(n),t.info[e]),"fiat"===n.type?(t.fiats.push(b(n)),n.image="".concat(w).concat(e.toLowerCase()).concat(k)):(t.cryptos.push(b(n)),n.type="crypto")):(n.code=e.replace(/:.*/,""),n.name=n.code,n.type="unknown"),n.anchors=new T,n.balances=new T,n.offers=new T,n.shares=new T,n.balances.mirror(function(e){n.anchors.push(e.anchor),e.trap("amount",function(){return n.compute("amount")}),e.trap(["buying","selling"],function(){return n.compute("liabilities")})}),n.orderbook=O.forAsset(b(n)),n.define("price","globalPrice",function(){return n.globalPrice||n.orderbook.price}),n.orderbook.trap("price",function(){return n.compute("price")}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=s(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,E),y(t,null,[{key:"resolve",value:function(e){return t.table[e]||new t(e)}}]),y(t,[{key:"getInfo",value:function(){var e=d(l.mark(function e(){return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.name&&"crypto"===this.type){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,_.crypto.info(this);case 4:this.info=e.sent,this.name=this.info.name,this.image=this.info.image.small;case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addOrderbook",value:function(e){this.orderbook.addChild(e)}}]),t}();A.define("amount","balances",function(){return this.balances&&this.balances.reduce(function(e,t){return e+t.amount},0)}),A.define("value",["amount","price"],function(){return 0===this.amount?0:this.amount*this.price}),A.define("liabilities",["balances","price"],function(){if(this.balances){var e=this.balances.reduce(function(e,t){return e+t.buying-t.selling},0);return this.price*e}}),A.define("isSupported",["type","price"],function(){return!("unknown"===this.type&&!this.price)}),A.refreshPrices=function(){var e=d(l.mark(function e(t){return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=7;break}return e.next=3,A.refreshCryptoPrices();case 3:return e.next=5,A.refreshFiatPrices();case 5:e.next=11;break;case 7:return e.next=9,A.refreshCryptoPrices(t.filter(function(e){return"crypto"===e.type}).map(function(e){return e.code}));case 9:return e.next=11,A.refreshFiatPrices(t.filter(function(e){return"fiat"===e.type}).map(function(e){return e.code}));case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),A.refreshCryptoPrices=d(l.mark(function e(){var t,n,r=arguments;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=r.length>0&&void 0!==r[0]?r[0]:A.cryptos).length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,_.crypto.prices(t);case 5:n=e.sent,t.forEach(function(e){return e.globalPrice=n[e.code]});case 7:case"end":return e.stop()}},e)})),A.refreshFiatPrices=d(l.mark(function e(){var t,n,r=arguments;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=r.length>0&&void 0!==r[0]?r[0]:A.fiats).length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,_.fiat.prices(t);case 5:n=e.sent,t.forEach(function(e){return e.price=e.globalPrice=n[e.code]});case 7:case"end":return e.stop()}},e)})),A.info={USD:{type:"fiat",name:"US Dollar"},EUR:{type:"fiat",name:"Euro"},CNY:{type:"fiat",name:"Renminbi"},BTC:{id:"bitcoin"},ETH:{id:"ethereum"},XRP:{id:"ripple"},XLM:{id:"stellar"},KIN:{id:"kin"},BAT:{id:"basic-attention-token"},ZRX:{id:"0x"},BCH:{id:"bitcoin-cash"},STEEM:{id:"steem"},SBD:{id:"steem-dollar"},LINK:{id:"chainlink"},SLT:{id:"smartlands"},MOBI:{id:"mobius"},SHX:{id:"stronghold-token"},RMT:{id:"sureremit"},TERN:{id:"ternio"},PEDI:{id:"pedity"},GRAT:{id:"gratz"},REPO:{id:"repo"}},A.table={},A.cryptos=[],A.fiats=[],new A(S.currency),setInterval(A.refreshCryptoPrices,6e4),setInterval(A.refreshFiatPrices,36e5),console.log(A.table)},197:function(e,t,n){var r=n(5),o=n(18);function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),r(e,o.key,o)}}var a=n(36),c=n(55).__,s=function(){"use strict";function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.current&&e.current.close(),e.current=this,this.domNode=a.create("iframe",{title:"Signing Frame",src:t,sandbox:"allow-same-origin allow-scripts allow-forms allow-popups",hidden:!0}),o(this.domNode.style,e.style),a.append(document.body,this.domNode),this.show()}var t,n,r;return t=e,(n=[{key:"show",value:function(){var t=this;this.domNode.hidden&&(this.htmlOverflow=document.documentElement.style.overflow,this.bodyOverflow=document.body.style.overflow,document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",e.shadow.onclick=function(){return t.close()},e.close.onclick=function(){return t.close()},a.show(e.shadow,e.close,this.domNode))}},{key:"hide",value:function(){this.domNode.hidden||(document.documentElement.style.overflow=this.htmlOverflow,document.body.style.overflow=this.bodyOverflow,e.shadow.onclick=null,a.hide(e.shadow,e.close,this.domNode))}},{key:"close",value:function(){e.current=null,this.hide(),a.destroy(this.domNode)}}])&&i(t.prototype,n),r&&i(t,r),e}();window.addEventListener("message",function(e){var t=s.current&&s.current.domNode.contentWindow;if(e.source===t)switch(e.data){case"show":s.current.show();break;case"hide":s.current.hide();break;case"close":s.current.close()}}),s.style={position:"fixed",zIndex:998,right:0,top:0,width:"30em",maxWidth:"100%",height:"100vh",border:"0.1em solid hsl(240, 10%, 75%)",background:"hsl(240, 40%, 98%)",backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12em" height="12em" viewBox="0 0 18055.55 18055.55" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd"><path d="M6184.01 6244.26l-5076.93 5077.09c-1542.18 1542.18-1542.18 4042.74 0 5584.91 1542.18 1542.18 4042.74 1542.18 5584.91 0l5050.06-5050.22c-946.39 926.55-2243.37 1281.63-3458.3 1065.06l-2788.46 2788.46c-881.29 881.29-2310.22 881.29-3191.52 0-881.29-881.29-881.29-2310.22 0-3191.51l2788.62-2788.62 2311.35-2311.19c883.05-858.58 2294.87-850.9 3168.48 22.71 880.17 880.17 881.29 2306.54 3.52 3188.31l2288.31-2288.47c-136.75-767.89-501.74-1503.15-1095.13-2096.54-593.23-593.23-1328.33-958.22-2096.22-1095.13-1271.39-226.64-2574.93 181.38-3488.69 1095.13z" fill="#c1c1c1"/><path d="M11772.44 11825.98l5076.93-5077.09c1542.18-1542.18 1542.18-4042.74 0-5584.91-1542.18-1542.18-4042.74-1542.18-5584.91 0L6214.4 6214.2c946.39-926.56 2243.37-1281.63 3458.3-1065.07l2788.46-2788.46c881.29-881.29 2310.22-881.29 3191.52 0 881.29 881.29 881.29 2310.22 0 3191.52l-2788.62 2788.62L10552.71 10652c-883.05 858.57-2294.87 850.9-3168.48-22.71-880.17-880.17-881.29-2306.55-3.52-3188.31L5092.4 9729.45c136.75 767.89 501.74 1503.15 1095.13 2096.54 593.23 593.23 1328.33 958.22 2096.22 1095.13 1271.39 226.64 2574.93-181.37 3488.69-1095.13z" fill="#9f9f9f"/><path d="M12651.33 7587.95l-1418.38 1418.38c7.84 577.72-204.89 1157.83-638.02 1603.44l2269.12-2268.96c-45.58-255.91-116.44-508.14-212.72-752.85zm-909.28 4268.09c-810.76 793.48-1919.32 1194.94-3038.77 1116.89-139.79-9.76-279.9-26.87-419.53-51.82l-509.1 509.1c365.47 95.48 749.17 146.35 1144.56 146.35 448 0 880.65-65.26 1289.15-186.81l1533.7-1533.7z" fill="#a6a6a6"/><path d="M6214.4 6214.2c810.76-793.48 1919.32-1194.94 3038.77-1116.89 139.79 9.76 279.9 26.87 419.53 51.82l439.2-439.2c-379.87-103.8-779.89-159.3-1192.7-159.3-416.81 0-820.35 56.46-1203.57 162.34L6214.4 6214.2zm509.1 2788.78c7.36-557.41 220.08-1112.57 638.02-1542.5L5092.4 9729.44c42.87 240.56 108.12 478.07 195.77 708.87L6723.5 9002.98z" fill="#888888"/></svg>\')',backgroundRepeat:"no-repeat",backgroundPosition:"center",padding:0},s.close=a.create("span",{hidden:!0},"Ã— ".concat(c("Close"))),o(s.close.style,{position:"fixed",zIndex:999,top:"0.1em",right:"0.1em",color:"hsl(0, 0%, 40%)",fontSize:"0.9em",fontWeight:"bold",cursor:"pointer",background:"hsl(0, 0%, 95%)",borderBottomLeftRadius:"0.1em",padding:"0.1em 0.3em"}),document.body.insertBefore(s.close,document.body.firstChild),s.shadow=a.create("div",{hidden:!0}),o(s.shadow.style,{position:"fixed",zIndex:997,top:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.2)"}),document.body.insertBefore(s.shadow,document.body.firstChild),e.exports=s},206:function(e,t,n){var r=n(26),o=n(39),i=n(27),a=n(54);function c(e,t,n,o,i,a,c){try{var s=e[a](c),u=s.value}catch(e){return void n(e)}s.done?t(u):r.resolve(u).then(o,i)}function s(e){return function(){var t=this,n=arguments;return new r(function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,s,"next",e)}function s(e){c(i,r,o,a,s,"throw",e)}a(void 0)})}}var u=t,l=n(191),f=n(174),p=n(35).day,h=n(86);function d(e,t){return l.get("https://api.coingecko.com/api/v3/".concat(e),{params:t})}function m(e,t){return b.apply(this,arguments)}function b(){return(b=s(a.mark(function e(t,n){var r,o=arguments;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=o.length>2&&void 0!==o[2]?o[2]:{}).base=h.currency,"string"==typeof n?r.symbols=n:("EUR"===h.currency&&(n=n.filter(function(e){return"EUR"!==e})),r.symbols=n.join(",")),r.source="equilibre.io",e.abrupt("return",l.get("https://api.exchangeratesapi.io/".concat(t),{params:r}).then(function(e){return"EUR"!==h.currency||e.data.start_at||(e.data.rates.EUR=1),e}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function v(e,t){localStorage["prices.".concat(e.code)]=o([p(),t])}function y(e){var t=localStorage["prices.".concat(e.code)];if(t){var n=JSON.parse(t);return n[0]===p()?n[1]:void 0}}u.assetHistory=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return"crypto"===e.type?u.crypto.history(e,t):"fiat"===e.type?u.fiat.history(e,t):void 0},u.crypto={},u.crypto.list=s(a.mark(function e(){var t,n;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("coins/list");case 2:return t=e.sent,n={},t.data.forEach(function(e){var t=e.symbol.toUpperCase();n[t]={id:e.id,name:e.name}}),e.abrupt("return",n);case 6:case"end":return e.stop()}},e)})),u.crypto.stellarNative=s(a.mark(function e(){var t;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("exchanges/stellar_term");case 2:return t=e.sent,e.abrupt("return",t.data.tickers.map(function(e){return e.coin_id}).filter(function(e){return e}));case 4:case"end":return e.stop()}},e)})),u.crypto.info=function(){var e=s(a.mark(function e(t){var n;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("coins/".concat(t.id),{localization:!1,tickers:!1,market_data:!1,community_data:!1,developer_data:!1,sparkline:!1});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),u.crypto.prices=function(){var e=s(a.mark(function e(t){var n,r,o,i;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(function(e){return e.id}).join(","),r=h.currency.toLowerCase(),e.next=4,d("simple/price",{ids:n,vs_currencies:r});case 4:return o=e.sent,i={},t.forEach(function(e){var t=o.data[e.id];t&&(i[e.code]=t[r])}),e.abrupt("return",i);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),u.crypto.history=function(){var e=s(a.mark(function e(t){var n,r,o,i=arguments;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:1e3,e.next=3,d("coins/".concat(t.id,"/market_chart"),{vs_currency:h.currency,days:n});case 3:return r=e.sent,o=r.data.prices.map(function(e,t){return{time:e[0],price:e[1],volume:+f(r.data.total_volumes[t][1]/e[1])}}),e.abrupt("return",o);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),u.fiat={},u.fiat.prices=function(){var e=s(a.mark(function e(t){var n,r,o,i;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(function(e){return e.code}),e.next=3,m("latest",n);case 3:for(i in r=e.sent,o=r.data.rates)o[i]=f(1/o[i],8);return e.abrupt("return",o);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),u.fiat.history=function(){var e=s(a.mark(function e(t){var n,r,o,c,s,u,l,p=arguments;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:1e3,!(r=y(t))){e.next=4;break}return e.abrupt("return",r);case 4:return o=(new Date).toISOString().slice(0,10),(c=new Date(o)).setDate(c.getDate()-n),s=c.toISOString().slice(0,10),e.next=10,m("history",t.code,{start_at:s,end_at:o});case 10:return u=e.sent,l=i(u.data.rates).sort().map(function(e){return{time:new Date(e).getTime(),price:+f(1/u.data.rates[e][t.code],8)}}),v(t,l),e.abrupt("return",l);case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},207:function(e,t,n){var r=n(11),o=n(9),i=n(33),a=n(5),c=n(25),s=n(34),u=n(27),l=n(18);function f(e){return(f="function"==typeof o&&"symbol"==typeof r?function(e){return typeof e}:function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":typeof e})(e)}function p(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=s?i:function(e){return e.__proto__||i(e)})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a(e,r.key,r)}}function m(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function b(e,t){return(b=s||function(e,t){return e.__proto__=t,e})(e,t)}var v=n(180),y=n(174),g=n(87),w=n(172),k=n(55).__,T=e.exports=function(e){"use strict";function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=p(this,h(t).call(this))).base=e,r.quote=n,n?(r.type="native",r.name="".concat(e.code,"/").concat(n.code),r.quote.trap("price",function(){return r.updateOffersPrices()})):(r.type="agregated",r.name="".concat(e.code," (").concat(k("Agregated"),")"),r.childs=[]),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=c(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,g),m(t,null,[{key:"forBalance",value:function(e,n){if(e.asset!==n){var r=new t(e.asset,n);e.orderbook=r,e.asset.addOrderbook(r),r.balance=e;var o=new w.Asset(e.code,e.anchor.address),i=w.Asset.native(),a=v.resolve.server().orderbook(o,i),c={onmessage:function(e){return r.ingest(e)}};return this.close=a.stream(c),r}}},{key:"forAsset",value:function(e){return new t(e)}}]),m(t,[{key:"ingest",value:function(e){E(this.bids,e.bids)||(this.bids=S(e.bids,this.quote,this.balance,"bids")),E(this.asks,e.asks)||(this.asks=S(e.asks,this.quote,this.balance,"asks"))}},{key:"updateOffersPrices",value:function(){this.bids&&this.set("bids",_(this.bids,this.quote)),this.asks&&this.set("asks",_(this.asks,this.quote))}},{key:"mergeOffers",value:function(e){if(this.childs.length<2)this.set(e,this.childs[0]&&this.childs[0][e]);else{var t=this.childs.reduce(function(t,n){return n[e]?t.concat(n[e]):t},[]);if(t.length){var n="bids"===e?function(e,t){return t.price-e.price}:function(e,t){return e.price-t.price},r=0,o=0;this.set(e,t.sort(n).map(function(e){var t=l({},e);return t.cumul=r+=+e.amount,t.volume=o+=+e.amount*e.price,t}))}else this[e]=null}}},{key:"addChild",value:function(e){var t=this;this.childs.push(e),e.trap("bids",function(){return t.mergeOffers("bids")}),e.trap("asks",function(){return t.mergeOffers("asks")})}}]),t}();function E(e,t){if(!e)return!1;if(e.length!==t.length)return!1;for(var n in e.length){if(e[n].amount!==t[n].amount)return!1;if(e[n].price!==t[n].price)return!1}return!0}function S(e,t,n,r){return e.forEach(function(e){e.volume=void 0,e.baseVolume=void 0,e.basePrice=+e.price,e.quoteAmount=+e.amount,e.quoteVolume=void 0,e.balance=n,e.side=r}),_(e,t)}function _(e,t){var n=0,r=0,o=0;return e.forEach(function(e){"asks"===e.side?e.quoteAmount=+y(e.amount*e.basePrice,7):e.amount=+y(e.quoteAmount/e.basePrice,7),e.volume=n+=+y(e.amount*e.price,7),e.baseVolume=o+=+e.amount,e.quoteVolume=r+=+e.quoteAmount,e.price=+y(e.basePrice*t.price,7)}),e}T.define("bestBid","bids",function(){return this.bids&&this.bids[0]&&this.bids[0].price}),T.define("bestAsk","asks",function(){return this.asks&&this.asks[0]&&this.asks[0].price}),T.define("price",["bestBid","bestAsk"],function(){return this.base.globalPrice?(this.bestBid+this.bestAsk)/2:this.marketPrice()}),T.define("spread",["bestBid","bestAsk"],function(){return this.bestAsk-this.bestBid}),T.define("spread%",["spread","bestAsk"],function(){return 100*this.spread/this.bestAsk}),T.prototype.findOffer=function(e,t){var n,r=this[e],o=this.childs?this.childs.length:1,i={};for(var a in r){var c=r[a];if(!t||t(c)){var s=c.balance.anchor.address;if(i[s]||(i[s]=!0,n=c),u(i).length===o)break}}return n},T.prototype.findAsk=function(e){return this.findOffer("asks",e)},T.prototype.findBid=function(e){return this.findOffer("bids",e)},T.prototype.marketPrice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bids",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=this.findOffer(e,function(e){return e.quoteVolume>t});return n?n.price:0}},208:function(e,t,n){var r=n(11),o=n(9),i=n(33),a=n(5),c=n(25),s=n(34);function u(e){return(u="function"==typeof o&&"symbol"==typeof r?function(e){return typeof e}:function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":typeof e})(e)}function l(e){return(l=s?i:function(e){return e.__proto__||i(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a(e,r.key,r)}}function h(e,t){return(h=s||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(177),m=n(87),b=n(245),v=n(188),y=n(207),g=e.exports=function(e){"use strict";var t,n,r;function o(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(t=!(r=l(o).call(this))||"object"!==u(r)&&"function"!=typeof r?f(n):r).id=w(e),t.code=e.asset_code||"XLM",t.anchor=b.resolve(e.asset_issuer||"stellar.org"),o.table[t.id]=f(t),"XLM"===t.id||t.id in b.known?(t.asset=v.resolve(b.known[t.id]||t.code),t.known=!0):(t.asset=v.resolve(t.id),t.known=!1),t.amount=+e.balance,t.buying=+e.buying_liabilities,t.offers=new d,t.selling=+e.selling_liabilities,t.asset.balances.push(f(t)),"XLM"===t.code?t.asset.project("price",f(t)):(t.orderbook=y.forBalance(f(t),v.resolve("XLM")),t.orderbook.project("price",f(t))),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=c(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,m),t=o,r=[{key:"resolve",value:function(e,t){var n=e?"".concat(e,":").concat(t):"XLM";return o.table[n]}},{key:"ingest",value:function(e){var t=w(e),n=o.table[t];return n?(n.amount=+e.balance,n.buying=+e.buying_liabilities,n.selling=+e.selling_liabilities,n):new o(e,t)}}],(n=null)&&p(t.prototype,n),r&&p(t,r),o}();function w(e){return e.asset_code?"".concat(e.asset_code,":").concat(e.asset_issuer):"XLM"}g.table={},g.define("value",["amount","price"],function(){return 0===this.amount?0:this.amount*this.price})},211:function(e,t,n){var r=n(199),o=n(11),i=n(9),a=n(58),c=n(189),s=n(56),u=n(33),l=n(5),f=n(25),p=n(34),h=n(18);function d(e,t,n){return(d=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r(Date,[],function(){})),!0}catch(e){return!1}}()?r:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&k(o,n.prototype),o}).apply(null,arguments)}function m(e){return(m="function"==typeof i&&"symbol"==typeof o?function(e){return typeof e}:function(e){return e&&"function"==typeof i&&e.constructor===i&&e!==i.prototype?"symbol":typeof e})(e)}function b(e){return function(e){if(s(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(c(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return a(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=p?u:function(e){return e.__proto__||u(e)})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),l(e,r.key,r)}}function w(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function k(e,t){return(k=p||function(e,t){return e.__proto__=t,e})(e,t)}var T=n(180).CosmicLink,E=n(177),S=n(174),_=n(87),O=n(55).__,A=n(86),C=e.exports=function(e){"use strict";function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=v(this,y(t).call(this))).algorithm=P[e],r.operations=new E,r.orderbook=n;for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];return r.parameters=i,r.orderbook.listen("update",function(){return r.refresh()}),r.operations.listen("update",function(){return r.compute(["cosmicLink","description"])}),r.refresh(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=f(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,_),w(t,null,[{key:"rebalance",value:function(e){if("XLM"!==e.asset.code){var n=new t(A.rebalancingStrategy,e.asset.orderbook,e);return e.trap(["value","target"],function(){return n.refresh()}),e.asset.trap("liabilities",function(){return n.refresh()}),n}}}]),w(t,[{key:"refresh",value:function(){this.operations.splice(0,this.operations.length),this.operations.trigger("update"),this.type="",this.compute("offers"),this.algorithm.apply(this,[this].concat(b(this.parameters))),this.trigger("refresh")}},{key:"getOperation",value:function(e,t){var n="".concat(e.balance.anchor.id,":").concat(t?e.price:"take"),r=this.operations.find(function(e){return e.id===n});if(r)return r;var o={id:n};return this.operations.push(o),o}},{key:"addOperation",value:function(e,t){var n=this.getOperation(e,t>0);this.setOperation(n,e,Number(t)||n.amount)}},{key:"setOperation",value:function(e,t,n){e.amount=n,e.cost=n*t.price,e.offer=t,this.operations.trigger("update")}}]),t}();function R(e){return e.amount>0&&"bids"===e.offer.side||e.amount<0&&"asks"===e.offer.side?"buy":"sell"}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,n=h({},e),r=t*e.balance.asset.orderbook["spread%"]/100;return"bids"===e.side?n.price=e.price*(1+r):n.price=e.price*(1-r),e.balance.asset.globalPrice&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.025,n=e.balance.asset.price;"bids"===e.side?e.price=L(e.price,n*(1-t),n):e.price=L(e.price,n,n*(1+t))}(n),function(e){var t=e.balance.orderbook.quote;e.price_r={n:S(1e10*e.price,0),d:S(1e10*t.price,0)};for(;e.price_r.n>999999999||e.price_r.d>999999999;)e.price_r.n=S(e.price_r.n/10,0),e.price_r.d=S(e.price_r.d/10,0)}(n),n}function L(e,t,n){return Math.min(Math.max(e,t),n)}C.define("cosmicLink","operations",function(){return C.operationsToCosmicLink(this.operations)}),C.define("description","operations",function(){return C.operationsToDescription(this.operations)}),C.operationsToCosmicLink=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new T({memo:"Equilibre.io",source:A.portfolio.accountId});return e.forEach(function(e){t.addOperation("manageOffer",function(e){var t,n=e.offer,r=n.balance.code+":"+n.balance.anchor.address;t="buy"===R(e)?{buying:r,selling:"XLM",amount:e.amount*n.price_r.n/n.price_r.d,price:{n:n.price_r.d,d:n.price_r.n}}:{buying:"XLM",selling:r,amount:e.amount,price:n.price_r};return t.amount=Math.abs(t.amount).toFixed(7),t.offerId=e.offer.id,t}(e))}),t},C.operationsToDescription=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach(function(e){"buy"===R(e)?t.push("\n".concat(O("Buy")," ").concat(S(e.amount)," ").concat(e.offer.balance.code," ").concat(O("at")," ").concat(S(e.offer.price)," ").concat(A.currency,"\n      ")):t.push("\n".concat(O("Sell")," ").concat(S(e.amount)," ").concat(e.offer.balance.code," ").concat(O("at")," ").concat(S(e.offer.price)," ").concat(A.currency,"\n      "))}),t};var P={};function x(e,t,n){var r=n.asset.orderbook,o="asks"===e?"selling":"buying",i=S(Math.abs(n.delta)/n.asset.price,7),a=r.findOffer(e,function(t){return t.volume>i/10&&("bids"===e||t.balance.amount>i)});if(a){var c=n.asset.offers.find(function(e){return e[o].asset_code});a.id=c&&c.id,i*a.basePrice>1&&t.addOperation(I(a),i)}}P.balance=function(e,t){var n=t.asset,r=n.orderbook;if(n.liabilities&&n.offers.filter(function(e){return!e.outdated}).length)return void(e.description=[O("Rebalancing...")]);r.bestBid&&r.bestAsk&&null!=t.target&&("amount"!==t.mode&&0!==t.target?t.delta>0?x("asks",e,t):t.delta<0&&x("bids",e,t):P.limit(e,t.size-n.amount))},P.limit=function(e,t){if(t){var n=t>0?"bids":"asks",r=e.orderbook.findOffer(n);e.addOperation(I(r),Math.abs(t))}};var N=function(e){C[e]||(C[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(C,[e].concat(n))})};for(var D in P)N(D)},239:function(e,t,n){var r=n(18),o=e.exports,i=n(36),a=i.create("div",{hidden:!0});i.append(document.body,a),r(a.style,{position:"fixed",zIndex:999,top:0,width:"100%",height:"100%"}),o.enable=function(){return i.show(a)},o.disable=function(){return i.hide(a)}},240:function(e,t,n){var r=n(11),o=n(9),i=n(26),a=n(33),c=n(5),s=n(25),u=n(34),l=n(54);function f(e){return(f="function"==typeof o&&"symbol"==typeof r?function(e){return typeof e}:function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":typeof e})(e)}function p(e,t,n,r,o,a,c){try{var s=e[a](c),u=s.value}catch(e){return void n(e)}s.done?t(u):i.resolve(u).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new i(function(r,o){var i=e.apply(t,n);function a(e){p(i,r,o,a,c,"next",e)}function c(e){p(i,r,o,a,c,"throw",e)}a(void 0)})}}function d(e){return(d=u?a:function(e){return e.__proto__||a(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),c(e,r.key,r)}}function v(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function y(e,t){return(y=u||function(e,t){return e.__proto__=t,e})(e,t)}var g=n(191),w=n(180),k=n(177),T=n(87),E=n(55).__,S=n(188),_=n(208),O=n(86),A=n(246);function C(){return R.apply(this,arguments)}function R(){return(R=h(l.mark(function e(){var t;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.resolve.horizon(),e.prev=1,e.next=4,g.get(t);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),new Error(E("Can't connect to the Stellar blockchain"));case 9:case"end":return e.stop()}},e,null,[[1,6]])}))).apply(this,arguments)}e.exports=function(e){"use strict";function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=d(t).call(this),e=!r||"object"!==f(r)&&"function"!=typeof r?m(n):r,console.log(m(e)),e.assets=new k,e.balances=new k,e.define("total","assets",function(){return e.assets.filter(function(e){return e.isSupported}).reduce(function(e,t){return e+t.value},0)}),e.assets.mirror(function(t){return t.trap(["value","isSupported"],function(){return e.compute("total")})}),e.new=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=s(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,T),v(t,null,[{key:"resolve",value:function(){var e=h(l.mark(function e(n){var r,o,i,a,c;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new t).address=w.config.source=n,e.next=4,C();case 4:return e.next=6,w.resolve.address(n);case 6:if(!(o=e.sent).memo){e.next=9;break}throw new Error(E("Invalid federated address: shared account."));case 9:return e.next=11,w.resolve.isAccountEmpty(o.account_id);case 11:if(!e.sent){e.next=13;break}throw new Error(E("Empty account"));case 13:return r.accountId=o.account_id,i=w.resolve.server(),a=i.accounts().accountId(r.accountId),c={onmessage:function(e){return r.ingest(e)}},this.close=a.stream(c),e.abrupt("return",r);case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),v(t,[{key:"ingest",value:function(){var e=h(l.mark(function e(t){var n,r,o=this;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.account=t,n=l.mark(function e(n){var r;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_.ingest(t.balances[n]),-1!==o.assets.indexOf(r.asset)){e.next=9;break}return e.next=4,r.asset.getInfo();case 4:o.assets.push(r.asset),o.balances.push(r),o.trap("total",function(){return r.asset.compute("share")}),e.next=10;break;case 9:-1===o.balances.indexOf(r)&&o.balances.push(r);case 10:case"end":return e.stop()}},e)}),e.t0=l.keys(t.balances);case 3:if((e.t1=e.t0()).done){e.next=8;break}return r=e.t1.value,e.delegateYield(n(r),"t2",6);case 6:e.next=3;break;case 8:if(!this.new){e.next=16;break}return delete this.new,e.next=12,S.refreshPrices();case 12:return e.next=14,A.forPortfolio(this);case 14:this.offers=e.sent,this.trigger("open");case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(),S.define("share","value",function(){return O.portfolio&&100*this.value/O.portfolio.total})},245:function(e,t,n){var r=n(11),o=n(9),i=n(33),a=n(5),c=n(25),s=n(34);function u(e){return(u="function"==typeof o&&"symbol"==typeof r?function(e){return typeof e}:function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":typeof e})(e)}function l(e){return(l=s?i:function(e){return e.__proto__||i(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a(e,r.key,r)}}function h(e,t){return(h=s||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(200),m=n(35),b=n(87),v=e.exports=function(e){"use strict";var t,n,r;function o(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(t=!(r=l(o).call(this))||"object"!==u(r)&&"function"!=typeof r?f(n):r).address=e,t.alias=d.all[e],t.name=m.shorter(t.alias||t.address),o.all[e]=f(t),t.assets={},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=c(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,b),t=o,r=[{key:"resolve",value:function(e){return o.all[e]||new o(e)}}],(n=null)&&p(t.prototype,n),r&&p(t,r),o}();v.all={},v.known={"USD:GDUKMGUGDZQK6YHYA5Z6AY2G4XDSZPSZ3SW5UN3ARVMO6QSRDWP5YLEX":"USD","WSD:GDSVWEA7XV6M5XNLODVTPCGMAJTNBLZBXOFNQD3BNPNYALEYBNT6CE2V":"USD","USD:GDSRCV5VTM3U7Y3L6DFRP3PEGBNQMGOWSRTGSBWX6Z3H6C7JHRI4XFJP":"USD","USD:GBUYUAI75XXWDZEKLY66CFYKQPET5JR4EENXZBUZ3YXZ7DS56Z4OKOFU":"USD","USD:GBSTRUSD7IRX73RQZBL3RQUH6KS3O4NYFY3QCALDLZD77XMZOPWAVTUK":"USD","CNY:GAREELUB43IRHWEASCFBLKHURCGMHE5IF6XSE7EXDLACYHGRHM43RFOX":"CNY","XCN:GCNY5OXYSY4FKHOPT2SPOQZAOEIGXB5LBYW3HVU3OWSTQITS65M5RCNY":"CNY","BCNY:GBCNYBHAAPDSU3UIHXXQTHYZVSBJBI4YUNWXMKJBCPDHTVYR75G6NFHD":"CNY","EURT:GAP5LETOV6YIE62YAM56STDANPRDO7ZFDBGSNHJQIYGGKSMOZAHOOS2S":"EUR","SLT:GCKA6K5PCQ6PNF5RQBF7PQDJWRHO6UOGFMRLK3DYHDOI244V47XKQ4GP":null,"MOBI:GA6HCMBLTZS5VYYBCATRBRZ3BZJMAFUDKYYF6AH6MVCMGWMRDNSWJPIH":null,"SHX:GDSTRSHXHGJ7ZIVRBXEYE5Q74XUVCUSEKEBR7UCHEUUEK72N7I7KJ6JH":null,"RMT:GDEGOXPCHXWFYY234D2YZSPEJ24BX42ESJNVHY5H7TWWQSYRN5ZKZE3N":null,"TERN:GDGQDVO6XPFSY4NMX75A7AOVYCF5JYGW2SHCJJNWCQWIDGOZB53DGP6C":null,"PEDI:GBVUDZLMHTLMZANLZB6P4S4RYF52MVWTYVYXTQ2EJBPBX4DZI2SDOLLY":null,"GRAT:GAJ7V3EMD3FRWAPBEJAP7EC4223XI5EACDZ46RFMY5DYOMCIMWEFR5II":null,"REPO:GCZNF24HPMYTV6NOEHI7Q5RJFFUI23JKUKY3H3XTQAFBQIBOHD5OXG3B":null,"BTC:GBSTRH4QOTWNSVA6E4HFERETX4ZLSR3CIUBLK7AXYII277PFJC4BBYOG":null,"BTC:GATEMHCCKCY67ZUCKTROYN24ZYT5GK4EQZ65JJLDHKHRUZI3EUEKMTCH":null,"BTC:GAUTUYY2THLF7SGITDFMXJVYH3LHDSMGEAKSBU267M2K7A3W543CKUEF":null,"BTC:GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P":null,"BTC:GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5":null,"ETH:GBSTRH4QOTWNSVA6E4HFERETX4ZLSR3CIUBLK7AXYII277PFJC4BBYOG":null,"ETH:GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P":null,"ETH:GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5":null,"ETH:GBETHKBL5TCUTQ3JPDIYOZ5RDARTMHMEKIO2QZQ7IOZ4YC5XV3C2IKYU":null,"ETH:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR":null,"LTC:GC5LOR3BK6KIOK7GKAUD5EGHQCMFOGHJTC7I3ELB66PTDFXORC2VM5LP":null,"LTC:GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5":null,"LTC:GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P":null,"XRP:GBVOL67TMUQBGL4TZYNMY3ZQ5WGQYFPFD5VJRWXR72VA33VFNL225PL5":null,"XRP:GCNSGHUCG5VMGLT5RIYYZSO7VQULQKAJ62QA33DBC5PPBSO57LFWVV6P":null,"KIN:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR":null,"BAT:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR":null,"ZRX:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR":null,"BCH:GAEGOS7I6TYZSVHPSN76RSPIVL3SELATXZWLFO4DIAFYJF7MPAHFE7H4":null,"STEEM:GB3KBOFUCVTWEZ7YIZ7PAKLQMKPCTGWU3LOMANMCT7V6I3AAK4USTEEM":null,"SBD:GB3KBOFUCVTWEZ7YIZ7PAKLQMKPCTGWU3LOMANMCT7V6I3AAK4USTEEM":null,"LINK:GBDEVU63Y6NTHJQQZIKVTC23NWLQVP3WJ2RI2OTSJTNYOIGICST6DUXR":null}},246:function(e,t,n){var r=n(11),o=n(9),i=n(26),a=n(33),c=n(5),s=n(25),u=n(34),l=n(18),f=n(54);function p(e){return(p="function"==typeof o&&"symbol"==typeof r?function(e){return typeof e}:function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":typeof e})(e)}function h(e,t,n,r,o,a,c){try{var s=e[a](c),u=s.value}catch(e){return void n(e)}s.done?t(u):i.resolve(u).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new i(function(r,o){var i=e.apply(t,n);function a(e){h(i,r,o,a,c,"next",e)}function c(e){h(i,r,o,a,c,"throw",e)}a(void 0)})}}function m(e){return(m=u?a:function(e){return e.__proto__||a(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),c(e,r.key,r)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}function g(e,t){return(g=u||function(e,t){return e.__proto__=t,e})(e,t)}var w=n(180),k=n(247),T=n(177),E=n(174),S=n(87),_=n(35).day,O=n(188),A=n(208),C=function(e){"use strict";function t(e,n){var r,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=m(t).call(this),r=!i||"object"!==p(i)&&"function"!=typeof i?b(o):i;var a=O.resolve("XLM"),c=e.buying.asset_code?e.buying:e.selling;return r.balance=A.resolve(c.asset_code,c.asset_issuer),r.asset=r.balance.asset,r.side=e.buying.asset_code?"buy":"sell",r.intern=R(e),r.define("price","rawPrice","sell"===r.side?function(){return a.price*r.rawPrice}:function(){return a.price/r.rawPrice}),a.trap("price",function(){return r.compute("price")}),r.update(e),r.balance.offers.push(b(r)),r.asset.offers.push(b(r)),n&&n.push(b(r)),t.table[r.intern]=b(r),r.listen("destroy",function(){r.balance.offers.splice(r.balance.offers.indexOf(b(r)),1),r.asset.offers.splice(r.asset.offers.indexOf(b(r)),1),n&&n.splice(n.indexOf(b(r)),1),delete t.table[r.intern]}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=s(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,S),y(t,null,[{key:"forPortfolio",value:function(){var e=d(f.mark(function e(n){var r,o,i;return f.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new T,o=w.resolve.server(),i=o.offers("accounts",n.accountId),e.next=5,t.update(i,r);case 5:return setInterval(function(){return t.update(i,r)},5e3),e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=d(f.mark(function e(n,r){return f.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.forEach(function(e){return e.opened=!1}),e.next=3,k(n).then(function(e){e.forEach(function(e){return t.ingest(e,r)})});case 3:r.filter(function(e){return!e.opened}).forEach(function(e){return e.destroy()});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"ingest",value:function(){var e=d(f.mark(function e(n,r){var o;return f.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(o=t.table[R(n)])?o.update(n):new t(n,r);case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}]),y(t,[{key:"update",value:function(e){this.opened=!0,l(this,e),this.rawPrice=e.price,this.compute("price"),this.rawAmount=e.amount,"buy"===this.side&&(this.amount=E(this.rawAmount*this.rawPrice,7)),this.date=_(this.last_modified_time),this.outdated=this.date!==_()}}]),t}();function R(e){return"".concat(e.id,"/").concat(I(e.buying),"/").concat(I(e.selling))}function I(e){return e.asset_issuer?"".concat(e.asset_code,":").concat(e.asset_issuer):"XLM"}C.table={},e.exports=C},248:function(e,t){t.isOverflowing=function(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}},249:function(e,t,n){var r=n(5),o=n(11),i=n(9),a=n(33),c=n(25),s=n(34);function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),r(e,o.key,o)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(e){return(f="function"==typeof i&&"symbol"==typeof o?function(e){return typeof e}:function(e){return e&&"function"==typeof i&&e.constructor===i&&e!==i.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?m(e):t}function d(e){return(d=s?a:function(e){return e.__proto__||a(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=c(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=s||function(e,t){return e.__proto__=t,e})(e,t)}var y=n(175),g=n(174),w=n(190),k=n(55).__,T=n(180).CosmicLink,E=n(197),S=n(86),_=function(e){"use strict";function t(e){var n;p(this,t),(n=h(this,d(t).call(this,"\n<section>\n  <h2>".concat(k("Activity"),"</h2>\n  %selector\n  %view\n</section>\n    ")))).portfolio=e;var r=new w;return r.project("view",m(n)),r.add("offers",k("Open Orders"),new t.Offers(e),"select"),n}return b(t,y),t}();_.Offers=function(e){"use strict";function t(e){var n;return p(this,t),(n=h(this,d(t).call(this,"\n<section>\n  <table>\n    <tr>\n      <th>".concat(k("Date"),"</th>\n      <th>").concat(k("Asset"),"</th>\n      <th>").concat(k("Direction"),"</th>\n      <th>").concat(k("Amount"),"</th>\n      <th>").concat(k("Price")," (").concat(S.currency,')</th>\n    </tr>\n    %formatOffer:offers...\n    <tr><td colspan="5" align="center" onclick=%cancelOffers>\n      <h3>').concat(k("Cancel All"),'</h3>\n    </td></tr>\n  </table>\n</section>\n\n<p class="note">\n  ').concat(k("All orders are passed against Stellar Lumens (XLM)."),"\n  ").concat(k("For your comfort, prices are displayed in their %%globalCurrency equivalent."),"\n  ").concat(k("However, those converted values will change according to XLM price movement."),"\n</p>\n    ")))).portfolio=e,n.offers=e.offers,n.globalCurrency=S.currency,n}return b(t,y),l(t,[{key:"formatOffer",value:function(e){return new _.Offer(e)}},{key:"cancelOffers",value:function(){if(this.offers.length){var e=this.portfolio.accountId,t=this.offers.map(function(e){return{type:"manageOffer",offerId:e.id,amount:0}}),n=new T({memo:"Equilibre.io",network:"public",source:e,operations:t});new E(n.uri)}}}]),t}(),_.Offer=function(e){"use strict";function t(e){var n;return p(this,t),(n=h(this,d(t).call(this,'\n<tr>\n  <td>%formatDate:last_modified_time</td>\n  <td>\n    <img src=%image alt="">\n    <span>%name / %anchor</span>\n  </td>\n  <td>%side</td>\n  <td align="right">%nice:amount</td>\n  <td align="right">%nice:price</td>\n</tr>\n    ',e))).offer=e,n.image=e.asset.image,n.name=e.asset.code,n.side="buy"===e.side?k("Buy"):k("Sell"),n.anchor=e.balance.anchor.name,n.date=new Date(e.last_modified_time).toLocaleDateString(),n}return b(t,y),l(t,[{key:"nice",value:function(e){return g(e)}},{key:"formatDate",value:function(e){return(e?new Date(e):new Date).toLocaleDateString()}}]),t}(),_.Orders=function(e){"use strict";function t(e){var n;return p(this,t),(n=h(this,d(t).call(this,"\n<table>\n  <tr>\n    <th>".concat(k("Date"),"</th>\n    <th>").concat(k("Asset"),"</th>\n    <th>").concat(k("Direction"),"</th>\n    <th>").concat(k("Amount"),"</th>\n    <th>").concat(k("Price"),'</th>\n  </tr>\n  <tr>\n    <td colspan="6"><h3><i18n>').concat(k("Open Orders"),'</i18n></h3></td>\n  </tr>\n  %openOrders...\n  <tr>\n    <td colspan="6"><h3><i18n>').concat(k("Completed Orders"),"</i18n></h3></td>\n  </tr>\n  %completedOrders...\n</table>\n    ")))).portfolio=e,n}return b(t,y),t}(),_.Transfers=function(e){"use strict";function t(e){var n;return p(this,t),(n=h(this,d(t).call(this,"\n<table>\n  <tr>\n    <th>".concat(k("Date"),"</th>\n    <th>").concat(k("Asset"),"</th>\n    <th>").concat(k("With"),"</th>\n    <th>").concat(k("Amount"),"</th>\n  </tr>\n  %transfers...\n</table>\n    ")))).portfolio=e,n}return b(t,y),t}(),e.exports=_},250:function(e,t,n){var r=n(11),o=n(9),i=n(5),a=n(33),c=n(25),s=n(34);function u(e){return(u="function"==typeof o&&"symbol"==typeof r?function(e){return typeof e}:function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i(e,r.key,r)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?m(e):t}function d(e){return(d=s?a:function(e){return e.__proto__||a(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=c(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=s||function(e,t){return e.__proto__=t,e})(e,t)}var y=n(209),g=n(253);n(254);var w=n(175),k=n(174),T=n(190),E=n(55).__,S=n(255),_=n(86),O=n(206),A=function(e){"use strict";function t(e){var n;return l(this,t),(n=h(this,d(t).call(this,"\n<section><h2>".concat(E("Portfolio"),': %total %currency</h2>\n  %summary\n  %chart\n\n  <p class="note" align="center">\n    ').concat(E("Anchor prices are from Stellar DEX")," /\n    ").concat(E("Global prices are from %%coingecko when available."),"\n    </p>\n\n</section>")))).portfolio=e,e.project("total",m(n),function(e){return k(e,2)}),n.currency=_.currency,n.summary=new t.Summary(m(n)),n.coingecko=new w('<a target="_blank" rel="noopener" href="https://coingecko.com">coingecko</a>'),n}return b(t,w),p(t,[{key:"select",value:function(e){this.chart&&this.chart.destroy(),e&&e.globalPrice&&e.code!==_.currency?this.chart=new t.Chart(e):this.chart=null}}]),t}();function C(e){return{name:e.name,code:e.code,asset:e,y:+k(e.value,2),amount:k(e.amount),price:k(e.price),percentage:e.percentage}}A.Summary=function(e){"use strict";function t(e){var n;l(this,t);var r=new T;return n=h(this,d(t).call(this,"%nav <section>%view</section>",r)),r.add("table",E("Table"),new A.Table(e)),r.add("graph",E("Graph"),function(){return new A.Graph(e)}),r.listen("select",function(e){return localStorage["PortfolioSummary.tab"]=e}),r.select(localStorage["PortfolioSummary.tab"]||"table"),n}return b(t,w),t}(),A.Table=function(e){"use strict";function t(e){var n;return l(this,t),(n=h(this,d(t).call(this,"\n<table>\n  <tr>\n    <th>".concat(E("Name"),"</th>\n    <th>").concat(E("Anchor"),"</th>\n    <th>").concat(E("Amount"),"</th>\n    <th>").concat(E("Price"),"</th>\n    <th>").concat(E("Value"),"</th>\n  </tr>\n  %assetsGui...\n</table>\n")))).parent=e,n.assetsGui=e.portfolio.assets.mirror(function(e){var t=new S(e);return t.domNode.onclick=function(){return n.select(t)},t}),e.portfolio.trap("total",function(){return n.sort()}),n}return b(t,w),p(t,[{key:"sort",value:function(){this.assetsGui.sort(function(e,t){return t.asset.value-e.asset.value})}},{key:"select",value:function(e){this.selected&&(this.selected.domNode.className="",this.selected.simpleView()),this.selected===e?(this.parent.select(),this.selected=null):(this.parent.select(e.asset),e.domNode.className="selected",this.selected=e,e.detailledView())}}]),t}(),A.Graph=function(e){"use strict";function t(e){var n;return l(this,t),(n=h(this,d(t).call(this,'<div -ref=%container align="center"></div>'))).parent=e,n.listen("destroy",function(){return n.chart&&n.chart.destroy()}),e.portfolio.trap("total",function(){setTimeout(function(){return n.makePie()},1)}),n}return b(t,w),p(t,[{key:"makePie",value:function(){var e=this;this.chart&&this.chart.destroy(),this.chart=y.chart(this.container,{title:"",legend:{enabled:!1},chart:{type:"pie"},tooltip:{pointFormat:"\n".concat(E("Amount"),": {point.amount} {point.code}<br>\n").concat(E("Price"),": {point.price} ").concat(_.currency,"<br>\n<b>").concat(E("Value"),": {point.y} ").concat(_.currency,"</b>\n")},plotOptions:{pie:{dataLabels:{format:"{point.amount} {point.code}<br>({point.percentage:.0f}%)"},point:{events:{select:function(t){return e.parent.select(t.target.options.asset)},legendItemClick:function(){return!1}}}}},series:[{name:E("Amount"),colorByPoint:!0,ignoreHiddenPoint:!0,data:this.parent.portfolio.assets.filter(function(e){return e.value}).map(C).sort(function(e,t){return t.y-e.y})}]})}}]),t}(),A.Chart=function(e){"use strict";function t(e){var n;return l(this,t),(n=h(this,d(t).call(this,"\n      <section><h3>".concat(e.code," ").concat(E("to")," ").concat(_.currency,"</h3>\n        <div -ref=%container><p>").concat(E("Loading..."),"</p></div>\n      </section>\n    ")))).asset=e,n.listen("destroy",function(){return n.chart&&n.chart.destroy()}),O.assetHistory(e).then(function(e){return n.makeChart(e)}),n}return b(t,w),p(t,[{key:"makeChart",value:function(e){this.chart=g.stockChart(this.container,{rangeSelector:{selected:2},chart:{backgroundColor:"#fbfbfd"},yAxis:[{labels:{align:"left"},height:"80%",resize:{enabled:!0}},{labels:{align:"left"},top:"80%",height:"20%",offset:0}],series:[{type:"spline",name:"Price",data:e.map(function(e){return[e.time,+k(e.price)]})},{type:"column",name:"Volume",data:e.map(function(e){return[e.time,e.volume]}),yAxis:1}],credits:{enabled:!1}})}}]),t}(),e.exports=A},254:function(e,t,n){var r=n(209);r.theme={chart:{backgroundColor:"#fbfbfd"},tooltip:{style:{fontSize:"14px"}},credits:{enabled:!1},plotOptions:{pie:{allowPointSelect:!0,animation:!1,cursor:"pointer",dataLabels:{style:{fontSize:"14px"}}}},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{enabled:!0},plotOptions:{pie:{showInLegend:!0,dataLabels:{format:"{point.percentage:.0f}%",distance:-20}}}}}]},colors:["rgba(231,  76,  60, 0.8)","rgba(230, 126,  34, 0.8)","rgba(242, 202,  39, 0.8)","rgba(46,  204, 112, 0.8)","rgba(52,  152, 219, 0.8)","rgba(155,  89, 182, 0.8)","rgba(231,  76,  60, 0.6)","rgba(230, 126,  34, 0.6)","rgba(242, 202,  39, 0.6)","rgba(46,  204, 112, 0.6)","rgba(52,  152, 219, 0.6)","rgba(155,  89, 182, 0.6)","rgba(231,  76,  60, 0.4)","rgba(230, 126,  34, 0.4)","rgba(242, 202,  39, 0.4)","rgba(46,  204, 112, 0.4)","rgba(52,  152, 219, 0.4)","rgba(155,  89, 182, 0.4)"]},r.setOptions(r.theme)},255:function(e,t,n){var r=n(11),o=n(9),i=n(5),a=n(33),c=n(25),s=n(34);function u(e){return(u="function"==typeof o&&"symbol"==typeof r?function(e){return typeof e}:function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i(e,r.key,r)}}function f(e){return(f=s?a:function(e){return e.__proto__||a(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=s||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(175),m=n(36),b=n(174),v=n(55).__,y=function(e){"use strict";function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=f(t).call(this,'\n<tr %style>\n  <td align="left">\n    <img src=%image alt="">\n    <span>%name</span>\n  </td>\n  <td align="left">\n    <div hidden=%simple>%anchors...</div>\n    <div %class>%anchorTotal</div>\n  </td>\n  <td align="right">\n    <div hidden=%simple>%amounts...</div>\n    <div %class>%amountTotal</div>\n  </td>\n  <td align="right">\n    <div hidden=%simple>%prices...</div>\n    <div %class title=%priceDetails>%priceTotal</div>\n  </td>\n  <td align="right">\n    <div hidden=%simple>%values...</div>\n    <div %class>%valueTotal</div>\n  </td>\n</tr>\n    '),(n=!o||"object"!==u(o)&&"function"!=typeof o?p(r):o).asset=e,n.image=e.image,n.name=e.code,n.anchors=e.balances.mirror(function(e){return w(e.anchor,"name")}),n.amounts=e.balances.mirror(function(e){return w(e,"amount",b)}),n.prices=e.balances.mirror(function(e){return n=w(t=e,"price",b),t.trap("orderbook",function(){t.orderbook&&t.orderbook.trap(["bestAsk","bestBid","spread%"],function(){return n.title=k(t.orderbook)})}),n;var t,n}),n.values=e.balances.mirror(function(e){return w(e,"value",function(e){return b(e,2)})}),e.link("amount",p(n),"amountTotal",b),e.link("price",p(n),"priceTotal",b),e.link("value",p(n),"valueTotal",function(e){return b(e,2)}),e.anchors.feed(p(n),"anchorHeader",g),n.priceDetails="";var i=n.asset.orderbook;return i&&i.trap(["bestAsk","bestBid","spread%"],function(){return n.priceDetails=k(i)}),n.simpleView(),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=c(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,d),n=t,(r=[{key:"simpleView",value:function(){this.simple=!0,this.class="",this.anchorTotal=this.anchorHeader}},{key:"detailledView",value:function(){this.simple=!1,this.class="footer",this.anchorTotal="Total"}}])&&l(n.prototype,r),o&&l(n,o),t}();function g(e){return 1===e.length?e[0].name:"".concat(v("Multiple")," (").concat(e.length,")")}function w(e,t,n){var r=m.create("div",null,e[t]);return e.link(t,r,"textContent",n),r}function k(e){return"XLM"===e.base.code?"":"\nBuy: ".concat(b(e.bestBid)," - Sell: ").concat(b(e.bestAsk)," - Spread: ").concat(b(e["spread%"],2),"%\n  ")}e.exports=y},256:function(e,t,n){var r=n(11),o=n(9),i=n(33),a=n(25),c=n(34);function s(e){return(s="function"==typeof o&&"symbol"==typeof r?function(e){return typeof e}:function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":typeof e})(e)}function u(e){return(u=c?i:function(e){return e.__proto__||i(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=c||function(e,t){return e.__proto__=t,e})(e,t)}var p=n(175),h=n(55).__,d=n(86),m=function(e){"use strict";function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(r=u(t).call(this,"\n      <section><h2>".concat(h("Settings"),"</h2>\n        <section><h3>").concat(h("General Settings"),"</h3>\n          <form>\n            <label><span>").concat(h("Language"),':</span>\n              <select value=%language>\n                <option value="us">English</option>\n                <option value="fr">FranÃ§ais</option>\n              </select>\n            </label>\n            <label><span>').concat(h("Currency"),':</span>\n              <select value=%currency>\n                <option value="CNY">CNY</option>\n                <option value="EUR">EUR</option>\n                <option value="USD">USD</option>\n              </select>\n            </label>\n          </form>\n        </section>\n      </section>\n    ')))||"object"!==s(r)&&"function"!=typeof r?l(n):r,d.project(["currency","language"],l(e)),e.project(["currency","language"],d),e.listen("change:currency",function(){return location.reload()}),e.listen("change:language",function(){return location.reload()}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=a(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,p),t}();e.exports=m},257:function(e,t,n){var r=n(11),o=n(9),i=n(5),a=n(33),c=n(25),s=n(34);function u(e){return(u="function"==typeof o&&"symbol"==typeof r?function(e){return typeof e}:function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i(e,r.key,r)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?m(e):t}function d(e){return(d=s?a:function(e){return e.__proto__||a(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=c(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=s||function(e,t){return e.__proto__=t,e})(e,t)}var y=n(175),g=n(55),w=n(36),k=n(174),T=g.__,E=n(197),S=n(86),_=n(211),O=n(258),A=function(e){"use strict";function t(e){var n;l(this,t),(n=h(this,d(t).call(this,'\n<section class="RebalanceGui">\n  <h2>'.concat(T("Rebalance"),'</h2>\n  %table\n  <section hidden=%hideSection>\n    <div class="errors">%formatError:errors...</div>\n    <form onsubmit=%rebalance hidden=%hideRebalance>\n      <button type="submit" disabled=%block>').concat(T("Rebalance"),'</button>\n    </form>\n    <form onsubmit=%apply hidden=%hideApply>\n      <button type="submit" disabled=%block>').concat(T("Apply"),"</button>\n      <button onclick=%cancel>").concat(T("Cancel"),"</button>\n    </form>\n  </section>\n  %setupGui\n</section>\n    ")))).portfolio=e;var r=localStorage["target:".concat(e.account.id)];return n.share=O.forPortfolio(e,r),n.table=new t.Table(m(n)),n.table.project("selected",m(n)),n.project("selected",n.table),n.errors=n.share.errors,n.errors.feed(m(n),"block",function(e){return!!e.length}),n.define("hideRebalance",["selected","modified"],function(){return n.selected||n.modified}),n.define("hideApply",["selected","modified"],function(){return n.selected||!n.modified}),n.define("hideSection",["hideRebalance","hideApply"],function(){return n.hideRebalance&&n.hideApply}),n.share.project("modified",m(n)),n.define("setupGui","selected",function(){return n.setupGui&&n.setupGui.destroy(),n.selected&&new C.Setup(n.selected,m(n))}),n}return b(t,y),p(t,[{key:"formatError",value:function(e){return new y('<div class="error">%error</div>',{error:e})}},{key:"cancel",value:function(){return location.reload(),!1}},{key:"apply",value:function(){try{var e=this.portfolio.account.id;localStorage["target:".concat(e)]=this.share.template=this.share.toString(),this.share.modified=!1}catch(e){console.error(e)}return!1}},{key:"rebalance",value:function(){try{var e=function(e){var t=[];return e.childs.forEach(function(e){e.order&&(t=t.concat(e.order.operations))}),t}(this.share),t=this.portfolio.offers.filter(function(e){return e.outdated}).filter(function(t){return!e.find(function(e){return e.offer.id===t.id})});if(e.forEach(function(e){!e.offer.id&&t.length&&(e.offer.id=t.pop().id)}),!e.length)return!1;var n=_.operationsToCosmicLink(e);t.forEach(function(e){n.addOperation("manageOffer",{amount:0,offerId:e.id})}),n&&new E(n.uri)}catch(e){console.error(e)}return!1}}]),t}();A.Table=function(e){"use strict";function t(e){var n;return l(this,t),(n=h(this,d(t).call(this,'\n<section class="RebalanceTable">\n  <table>\n    <tr>\n      <th>'.concat(T("Name"),"</th>\n      <th>").concat(T("Goal"),"</th>\n      <th>").concat(T("Divergence"),"</th>\n      <th>").concat(T("Operation"),'</th>\n    </tr>\n    %formatShare:shares...\n    <tr hidden=true>\n      <td align="center" colspan="4"><h3>').concat(T("Add Asset"),"</h3></td>\n    </tr>\n  </table>\n</section>\n    ")))).selected=void 0,n.shares=e.share.childs,n.sortShares(n.shares),e.share.listen("update",function(){return n.sortShares(n.shares)}),n}return b(t,y),p(t,[{key:"formatShare",value:function(e){var t=this,n=new C(e);return n.domNode.onclick=function(){return t.selected=e},n}},{key:"sortShares",value:function(e){return e.sort(function(e,t){return t.goal-e.goal||e.globalPrice})}}]),t}();var C=function(e){"use strict";function t(e){var n;return l(this,t),(n=h(this,d(t).call(this,'\n<tr class="ShareGui">\n  <td align="left">\n    <img src=%image alt="">\n    <span>%name</span>\n  </td>\n  <td align="right">%goal%</td>\n  <td align="right">%divergence</td>\n  <td align="right">%description...</td>\n</tr>\n    '))).share=e,n.image=e.asset.image,n.name=e.name||e.asset&&e.asset.code,e.project("goal",m(n),function(e){return k(e,2)}),e.project("divergence",m(n),function(e){return null==e?"-":k(100*e,2)+"%"}),e.trap("order",function(){e.order?(e.order.project("cosmicLink",m(n)),e.order.project("description",m(n),R)):n.cosmicLink=n.description=null}),n}return b(t,y),t}();function R(e){return e.map(function(e){return w.create("div",null,e)})}C.Setup=function(e){"use strict";function t(e,n){var r;return l(this,t),(r=h(this,d(t).call(this,"\n<section>\n  <form onsubmit=%close>\n    <h3>%assetName</h3>\n    <hr>\n    <label><span>".concat(T("Size"),':</span>\n      <input class="half" type="number" step="any" min="0" %max value=%size\n       placeholder=%goal onchange=%switchMode>\n      <select class="half" onchange=%setMode value=%mode>\n        <option value="equal">').concat(T("Equal Share"),'</option>\n        <option value="percentage">').concat(T("Percentage"),'</option>\n        <option value="amount">').concat(T("Amount"),'</option>\n      </select>\n    </label>\n\n    <hr>\n\n    <input type="submit" value="').concat(T("Close"),'">\n  </form>\n</section>\n    ')))).parent=n,r.share=e,r.assetName=e.asset.name,e.project("goal",m(r),function(e){return k(e,2)}),e.project("size",m(r)),r.project("size",e,function(e){return null!=e?Number(e):null}),e.project("mode",m(r),function(e){return e||"equal"}),r.project("mode",e),r}return b(t,y),p(t,[{key:"switchMode",value:function(){this.size&&"equal"===this.mode&&(this.mode="percentage")}},{key:"setMode",value:function(){switch(this.mode){case"equal":this.size=null;break;case"percentage":this.size=+k(100*this.share.value/S.portfolio.total,2),this.max=100;break;case"amount":this.size=this.share.asset.amount,this.max=null}}},{key:"close",value:function(){return this.switchMode(),this.parent.selected=null,!1}}]),t}(),e.exports=A},258:function(e,t,n){var r=n(11),o=n(9),i=n(33),a=n(5),c=n(25),s=n(34),u=n(27),l=n(39);function f(e){return(f="function"==typeof o&&"symbol"==typeof r?function(e){return typeof e}:function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":typeof e})(e)}function p(e){return(p=s?i:function(e){return e.__proto__||i(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a(e,r.key,r)}}function m(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function b(e,t){return(b=s||function(e,t){return e.__proto__=t,e})(e,t)}var v=n(177),y=n(174),g=n(87),w=n(188),k=n(211),T=n(259),E=e.exports=function(e){"use strict";function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=p(t).call(this),n=!o||"object"!==f(o)&&"function"!=typeof o?h(r):o,e?(n.asset=e,n.mode="amount",n.size=e.amount,n.order=k.rebalance(h(n)),e.shares.push(h(n)),e.project("value",h(n))):(n.childs=new v,n.childs.listen("add",function(e){e.parent=h(n),n.compute()})),n.trap("size",function(){n.size&&(n.size=Math.max(0,n.size),"percentage"===n.mode&&(n.size=Math.min(100,n.size))),n.compute()}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=c(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,g),m(t,null,[{key:"forPortfolio",value:function(e,n){var r=n?t.fromString(n):new t;return r.portfolio=e,r.errors=new v,r.goal=100,e.share=r,e.trap("total",function(){return r.compute(e.total)}),e.assets.forEach(function(e){!r.childs.find(function(t){return e===t.asset})&&e.isSupported&&r.childs.push(new t(e))}),r.childs.forEach(function(t,n){e.assets.find(function(e){return e===t.asset})&&t.asset.isSupported||r.childs.splice(n,1)}),e.assets.listen("add",function(e){e.isValid&&r.childs.push(new t(e))}),e.assets.listen("remove",function(e){var t=r.childs.findIndex(function(t){return t.asset===e});r.childs.splice(t,1)}),r}}]),m(t,[{key:"compute",value:function(){console.error("compute"),this.parent?this.parent.compute():this.portfolio&&this.portfolio.total&&(this.errors.splice(0,this.errors.length),this.modified=this.hasChanged(),T.apply(this,this.portfolio.total))}},{key:"hasChanged",value:function(){return this.template!==this.toString()}},{key:"toString",value:function(e){var t=this.toTemplate();return l(t,null,e&&2)}},{key:"toTemplate",value:function(){var e={};return null!=this.size&&(e.size=this.size),null!=this.mode&&"equal"!==this.mode&&(e.mode=this.mode),this.asset?("unknown"===this.asset.type?e.asset=this.asset.id:e.asset=this.asset.code,1===u(e).length&&(e=e.asset)):this.childs&&(this.name&&(e.group=this.name),e.childs=this.childs.map(function(e){return e.toTemplate()})),e}},{key:"root",get:function(){return this.parent?this.parent.root:this}}],[{key:"fromString",value:function(e){var n=JSON.parse(e),r=t.fromTemplate(n);return r.template=e,r}},{key:"fromTemplate",value:function(e){"string"==typeof e&&(e={asset:e});var n=e.asset?new t(w.resolve(e.asset)):new t;return n.size=e.size,n.mode=e.mode,e.asset||(n.name=e.group,e.childs.forEach(function(e){return n.childs.push(t.fromTemplate(e))})),n}}]),t}();E.define("delta",["value","target"],function(){return+y(this.value-this.target,7)}),E.define("divergence",["delta","target"],function(){return this.target?this.delta/this.target:null})},259:function(e,t,n){var r=t,o=n(55).__;r.apply=function(e,t){if(!e.childs)return e.target=t;var n=0,a=[],c=[],s=e.mode||"equal";if(e.childs.forEach(function(e){"skip"===e.mode||"amount"===e.mode?(e.target=null!=e.size?e.asset.price*e.size:e.asset.price*e.asset.amount,e.goal=100*e.target/t,e.goal>100&&e.root.errors.push("".concat(e.asset.code,": ").concat(o("Order over portfolio total"))),n+=e.goal):null!=e.size?(e.goal=e.size,n+=e.size,a.push(e)):c.push(e)}),t<0)throw new Error("Rebalancing impossible");n>100||100!==n&&!c.length?(!function(e,t){var n=100-t;e.forEach(function(e){return e.goal+=n*e.goal/t})}(a,n),c.forEach(function(e){return e.goal=0})):c.length&&i[s](c,100-n),a.concat(c).forEach(function(e){r.apply(e,t*e.goal/100)})};var i={equal:function(e,t){var n=t/e.length;e.forEach(function(e){return e.goal=n})}}},260:function(e,t){e.exports='<section><h2>License</h2>\n  <section><h3>MIT License</h3>\n\n    <p>Copyright (c) 2019 Antoine Bodin &lt;<a\n    href="mailto:mister.ticot@cosmic.plus">mister.ticot@cosmic.plus</a>&gt;</p>\n\n    <p>Permission is hereby granted, free of charge, to any person obtaining a\n    copy of this software and associated documentation files (the "Software"),\n    to deal in the Software without restriction, including without limitation\n    the rights to use, copy, modify, merge, publish, distribute, sublicense,\n    and/or sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following conditions:</p>\n\n    <p>The above copyright notice and this permission notice shall be included\n    in all copies or substantial portions of the Software.</p>\n\n    <p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n    OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n    IN THE SOFTWARE.</p>\n  </section>\n</section>\n'},261:function(e,t){e.exports='<section><h2>February, 16th âˆ’ Beta 1 Release</h2>\n  <section><h3>Welcome!</h3>\n\n    <p>Equilibre.io is a portfolio balancer that runs on the Stellar\n    Decentralized Exchange. It is a convenient trading tool to manage positions\n    over the long term.</p>\n\n    <p>Regularly balancing an investment portfolio is known to boost its\n    performances, providing you choose wisely the assets to bet on. Equilibre.io\n    also let you spread your position over several anchors, for a better fund\n    safety.</p>\n\n    <p>Equilibre.io is still under testing & development. If you use it now,\n    I\'ll ask you to consider yourself as a tester. Please report any bug you\n    could encounter, and double-check transactions before signing them.</p>\n\n    <p>Your feedback matters to me and will be listened to.</p>\n\n    <p>Respectfully, <br>MisterTicot</p>\n\n  </section>\n\n  <section><h3>To Be Implemented</h3>\n    <ul>\n      <li>Interface to add/remove assets</li>\n      <li>Portfolio historic value</li>\n      <li>Customizable rebalancing periodicity</li>\n      <li>Better position spreading over anchors</li>\n      <li>Pie graph for rebalancing tab</li>\n    </ul>\n  </section>\n\n  <section><h3>Known Limitations</h3>\n    <ul>\n\n      <li>It is required to "Cancel All" offers between applying a new balance\n      setup</li>\n\n      <li>There may be a delay between validating a rebalancing operation &\n      having the interface reflecting it.</li>\n\n    </ul>\n  </section>\n</section>\n'},262:function(e,t,n){var r=n(11),o=n(9),i=n(33),a=n(34),c=n(25);function s(e){return(s="function"==typeof o&&"symbol"==typeof r?function(e){return typeof e}:function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=a?i:function(e){return e.__proto__||i(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=c(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=a||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(180).CosmicLink,m=n(175),b=n(36),v=n(55).__,y=n(86),g=n(197),w="GAWO2C52D57XBT7SQL6YB3XPHFLFD2J4Z5RN7HPFZSHXJMXH72HRXNV3",k=function(e){"use strict";function t(e,n){return u(this,t),l(this,f(t).call(this,'\n<footer id="footer" class="scrollable">\n  <div class="nobreak">%icons...</div>\n  %links\n</footer>\n    ',{icons:e,links:n}))}return p(t,m),t}(),T=function(e){"use strict";function t(e,n,r){var o;return u(this,t),(o=l(this,f(t).call(this,'<a -ref=%link class="Icon">%image</a>'))).image="string"==typeof e?new m(e):e,o.link.title=n,"function"==typeof r?o.link.onclick=r:"string"==typeof r&&(o.link.href=r,r.match(/^http/)&&(o.link.target="_blank",o.link.rel="noopener")),o}return p(t,m),t}();var E=[new T(n(263),"Keybase","https://keybase.io/team/cosmic_plus"),new T(n(264),"Telegram","https://t.me/cosmic_plus"),new T(n(265),"Reddit","https://reddit.com/r/cosmic_plus"),new T(n(266),"Twitter","https://twitter.com/cosmic_plus"),new T(n(267),"Medium","https://medium.com/cosmic-plus"),new T(n(268),"GitHub","https://github.com/cosmic-plus/webapp-equilibre-io"),new T(n(269),v("Website"),"https://cosmic.plus"),new T(n(270),v("Email"),"mailto:mister.ticot@cosmic.plus"),new T(n(271),v("Donate"),function(){var e=prompt("".concat(v("Equilibre.io runs on donation."),"\n\n").concat(v("Please contribute to its development according to what you think the service worth."),"\n\n").concat(v("Enter an amount (in Lumens)"),":"));if("0"===e||isNaN(+e))confirm("".concat(v("Not a valid amount"),": ").concat(e));else if(e){var t=new d({memo:v("Donation to Equilibre.io"),network:"public"}).addOperation("payment",{amount:e,destination:w});new g(t.uri)}})];var S='{"childs":["EUR","CNY","USD",{"size":12.5,"mode":"percentage","asset":"XLM"},{"size":12.5,"mode":"percentage","asset":"ETH"},{"size":12.5,"mode":"percentage","asset":"BTC"},{"size":4,"mode":"percentage","asset":"SLT"},{"size":4,"mode":"percentage","asset":"REPO"},{"size":2.25,"mode":"percentage","asset":"PEDI"},{"size":2.25,"mode":"percentage","asset":"TERN"}]}',_=new k(E,new m('\n<p>\n  <a target="_blank" rel="noopener" href="https://cosmic.plus">'.concat(v("A Cosmic.Plus Software"),"</a>\n  âˆ’ <a onclick=%displayDemo>").concat(v("Demo"),'</a>\n  âˆ’ <a target="_blank" rel="noopener" href="https://nucleo.fi/leaderboard/top/?span=3m">Performance</a>\n  âˆ’ <a onclick=%displayLicense>').concat(v("License"),"</a>\n  âˆ’ <a onclick=%displayAbout>").concat(v("About"),"</a>\n</p>\n"),{displayDemo:function(){localStorage["target:".concat(w)]=S,location.href="?address=".concat(w)},displayLicense:function(){return y.tabs.select("#license")},displayAbout:function(){return y.tabs.select("#about")}}));b.append(document.body,_)},271:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="none" d="M0 0h512v512H0z"/><path d="M211.719 367.797C219.469 379.281 224 393.109 224 408c0 39.734-32.266 72-72 72-39.758 0-72-32.266-72-72 0-23.172 11.148-43.563 28.164-56.734 1.852 5.594 4.336 11.125 8.289 15.906 7.055 8.516 20.336 18.266 43.531 16.344 7.578-.641 15.844-2.547 24.586-5.641 8.875-3.078 18.508-6.5 27.149-10.078zM389.875 32.578c-13.344 3.797-24.156 10.672-38.813 18.328-90 47-196.25 39.25-220 77-27.469 51.672-48.883 89.203-48.945 107.625-.016.063-.055.094-.07.141.586 19.953 19.625 58.438 29.07 75.969 6.789-15.516 17.492-29.219 32.25-40.688 7.414-5.766 13.289-9.922 18.617-13.5-3.016-9.25-6.945-20.016-10.875-28.203 10.742-7.391 26.078-26.484 31.398-40.313 13.227.094 30.25-3.172 44.773-6.938 6.406 6.844 12.977 13.563 21.766 20.016-3.961 14.344-7.07 27.063-23.438 38.359-22.313 15.438-42.734 21.578-69.484 43.109-16.086 12.953-26.07 28.203-30.625 45.641-3.148 12.094 4.734 53.016 58 33.141 10.023-3.75 23.398-8.531 34.875-14.25 23.797-11.813 52.922-40.781 61-44.828 15.234-7.641 49.813-10.656 86.313-35.016 12.531-8.375 22.063-20.688 26.477-33.625 33.242-64.828 60.883-59.656 68.633-72.563C477.734 133.734 423.563 23 389.875 32.578z"/></svg>\n'}}]);
//# sourceMappingURL=app.js.map